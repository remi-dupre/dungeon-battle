sudo: required

services:
  - docker

language: cpp

before_install:
 - docker run -d --name artful -v $(pwd):/travis ubuntu:artful tail -f /dev/null
   docker ps

install:
 - docker exec -t artful bash -c "
   apt-get update;
   apt-get install -y g++-7;
   apt-get install -y libsfml-dev;
   apt-get install -y doxygen;"

script:
 - docker exec -t artful -c "cd /travis;
   make doc CXX=g++-7 &&
   make debug CXX=g++-7 &&
   make tests CXX=g++-7 &&
   cd tests &&
   ./test_configuration &&
   cd .."

deploy:
  name: Travis Documentation Generation
  provider: pages
  local_dir: doc/html
  skip_cleanup: true
  github_token: $GITHUB_TOKEN
  on:
    branch: master
